{% extends "base.html" %}

{% block title %}Lista de Ambientes{% endblock %}

{% block content %}
<h1>Gerenciador de Ambientes</h1>

<div class="card">
    <h2>Criar Novo Ambiente</h2>
    <form action="{{ url_for('criar_ambiente') }}" method="post">
        <div class="form-group">
            <label for="nome">Nome do Ambiente</label>
            <input type="text" id="nome" name="nome" placeholder="Ex: ambiente_teste_web" required>
        </div>
        <button type="submit" class="btn btn-primary">Criar Ambiente</button>
    </form>
</div>

<h2>Ambientes Ativos</h2>
{% if ambientes %}
    {% for ambiente in ambientes %}
    <div class="card">
        <h3>{{ ambiente.nome }}</h3>
        <p><strong>PID do Shell:</strong> {{ ambiente.pid_bash }} | <strong>Criado em:</strong> {{ ambiente.data_criacao.strftime('%d/%m/%Y %H:%M') }}</p>
        <div class="card-actions">
            <a href="{{ url_for('view_ambiente', ambiente_id=ambiente.id) }}" class="btn btn-secondary">Gerenciar Ambiente</a>
            <form action="{{ url_for('terminar_ambiente', ambiente_id=ambiente.id) }}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Tem a certeza que quer terminar este ambiente e todos os seus processos?');">Derrubar Ambiente</button>
            </form>
        </div>
    </div>
    {% endfor %}
{% else %}
    <p>Nenhum ambiente ativo encontrado. Crie um novo acima.</p>
{% endif %}
{% endblock %}

